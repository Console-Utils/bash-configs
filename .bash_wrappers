#!/usr/bin/env bash

# shellcheck disable=SC2155

declare -i SUCCESS=0
declare -i WRONG_INPUT=1

# Recreates current repo by removing all files from current directory and cloning repo again.
__git_repo_recreate() {
  if [[ ! -d .git ]]
  then
    echo "Can't recreate .git repo from remote because '$PWD' doesn't contain .git folder." >&2
    return $WRONG_INPUT
  fi

  local remote="$(git config --get remote.origin.url)"
  if [[ $remote == "" ]]
  then
    echo "Can't recreate .git repo from remote because '$PWD' repo hasn't 'origin' remote configured." >&2
    return $WRONG_INPUT
  fi

  rm -rf .git
  rm -rf -- * .* &> /dev/null
  git clone "$remote" .

  return $SUCCESS
}
